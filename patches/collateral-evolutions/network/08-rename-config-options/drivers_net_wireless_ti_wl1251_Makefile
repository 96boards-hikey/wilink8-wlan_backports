--- a/drivers/net/wireless/ti/wl1251/Makefile
+++ b/drivers/net/wireless/ti/wl1251/Makefile
@@ -4,7 +4,7 @@
 wl1251_sdio-objs	+= sdio.o
 
 obj-$(CONFIG_WL1251)		+= wl1251.o
-obj-$(CONFIG_WL1251_SPI)	+= wl1251_spi.o
-obj-$(CONFIG_WL1251_SDIO)	+= wl1251_sdio.o
+obj-$(CONFIG_COMPAT_WL1251_SPI)+= wl1251_spi.o
+obj-$(CONFIG_COMPAT_WL1251_SDIO)+= wl1251_sdio.o
 
 ccflags-y += -D__CHECK_ENDIAN__
