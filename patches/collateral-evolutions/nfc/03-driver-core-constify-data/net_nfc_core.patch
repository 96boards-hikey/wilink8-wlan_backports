--- a/net/nfc/core.c
+++ b/net/nfc/core.c
@@ -732,7 +732,11 @@ struct class nfc_class = {
 };
 EXPORT_SYMBOL(nfc_class);
 
+#if (LINUX_VERSION_CODE >= KERNEL_VERSION(3,9,0))
 static int match_idx(struct device *d, const void *data)
+#else
+static int match_idx(struct device *d, void *data)
+#endif
 {
 	struct nfc_dev *dev = to_nfc_dev(d);
 	const unsigned int *idx = data;
